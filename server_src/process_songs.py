import json
from music21 import *
import pandas as pd
import mido

hz_vals = {'C0': 16.35, 'C#0': 17.32, 'Db0': 17.32, 'D0': 18.35, 'D#0': 19.45, 'Eb0': 19.45, 'E0': 20.6, 'F0': 21.83,
           'F#0': 23.12, 'Gb0': 23.12, 'G0': 24.5, 'G#0': 25.96, 'Ab0': 25.96,
           'A0': 27.5, 'A#0': 29.14, 'Bb0': 29.14, 'B0': 30.87, 'C1': 32.7, 'C#1': 34.65, 'Db1': 34.65, 'D1': 36.71,
           'D#1': 38.89, 'Eb1': 38.89, 'E1': 41.2, 'F1': 43.65, 'F#1': 46.25, 'Gb1': 46.25, 'G1': 49.0, 'G#1': 51.91,
           'Ab1': 51.91, 'A1': 55.0, 'A#1': 58.27, 'Bb1': 58.27, 'B1': 61.74, 'C2': 65.41, 'C#2': 69.3, 'Db2': 69.3,
           'D2': 73.42, 'D#2': 77.78, 'Eb2': 77.78, 'E2': 82.41, 'F2': 87.31, 'F#2': 92.5, 'Gb2': 92.5, 'G2': 98.0,
           'G#2': 103.83, 'Ab2': 103.83, 'A2': 110.0, 'A#2': 116.54, 'Bb2': 116.54, 'B2': 123.47, 'C3': 130.81,
           'C#3': 138.59, 'Db3': 138.59, 'D3': 146.83, 'D#3': 155.56, 'Eb3': 155.56, 'E3': 164.81, 'F3': 174.61,
           'F#3': 185.0, 'Gb3': 185.0, 'G3': 196.0, 'G#3': 207.65, 'Ab3': 207.65, 'A3': 220.0, 'A#3': 233.08,
           'Bb3': 233.08, 'B3': 246.94, 'C4': 261.63, 'C#4': 277.18, 'Db4': 277.18, 'D4': 293.66, 'D#4': 311.13,
           'Eb4': 311.13, 'E4': 329.63, 'F4': 349.23, 'F#4': 369.99, 'Gb4': 369.99, 'G4': 392.0, 'G#4': 415.3,
           'Ab4': 415.3, 'A4': 440.0, 'A#4': 466.16,
           'Bb4': 466.16, 'B4': 493.88, 'C5': 523.25, 'C#5': 554.37, 'Db5': 554.37, 'D5': 587.33,
           'D#5': 622.25, 'Eb5': 622.25, 'E5': 659.25, 'F5': 698.46, 'F#5': 739.99, 'Gb5': 739.99,
           'G5': 783.99, 'G#5': 830.61, 'Ab5': 830.61, 'A5': 880.0, 'A#5': 932.33, 'Bb5': 932.33,
           'B5': 987.77, 'C6': 1046.5, 'C#6': 1108.73, 'Db6': 1108.73, 'D6': 1174.66, 'D#6': 1244.51, 'Eb6': 1244.51,
           'E6': 1318.51, 'F6': 1396.91, 'F#6': 1479.98, 'Gb6': 1479.98, 'G6': 1567.98,
           'G#6': 1661.22, 'Ab6': 1661.22, 'A6': 1760.0, 'A#6': 1864.66, 'Bb6': 1864.66, 'B6': 1975.53, 'C7': 2093.0,
           'C#7': 2217.46, 'Db7': 2217.46, 'D7': 2349.32, 'D#7': 2489.02, 'Eb7': 2489.02,
           'E7': 2637.02, 'F7': 2793.83, 'F#7': 2959.96, 'Gb7': 2959.96, 'G7': 3135.96, 'G#7': 3322.44, 'Ab7': 3322.44,
           'A7': 3520.0, 'A#7': 3729.31, 'Bb7': 3729.31, 'B7': 3951.07, 'C8': 4186.01, 'C#8': 4434.92, 'Db8': 4434.92,
           'D8': 4698.63, 'D#8': 4978.03, 'Eb8': 4978.03, 'E8': 5274.04, 'F8': 5587.65, 'F#8': 5919.91, 'Gb8': 5919.91,
           'G8': 6271.93, 'G#8': 6644.88, 'Ab8': 6644.88, 'A8': 7040.0, 'A#8': 7458.62, 'Bb8': 7458.62, 'B8': 7902.13}


def get_freq_dict():
    workbook = pd.read_excel('note_freqs.xlsx')
    workbook.head()
    # display(workbook)
    notes = workbook['Note']
    freq = workbook['Frequency (Hz)']
    all_notes = list(notes.items())
    all_freqs = list(freq.items())
    print(all_freqs)
    hz_dict = dict()
    for i in range(len(all_freqs)):
        curr_note = all_notes[i][1]
        if '/' in all_notes[i][1]:
            both_notes = curr_note.partition("/")
            print(both_notes)
            hz_dict[both_notes[0]] = all_freqs[i][1]
            hz_dict[both_notes[2]] = all_freqs[i][1]
        else:
            hz_dict[curr_note] = all_freqs[i][1]


def get_instruments(path):
    mid = mido.MidiFile(path)
    for msg in mid:
        # print(msg)
        if msg.type == 'program_change':
            print(msg)

# get_instruments('riptidept2.midi')

def get_note_pitch_rests(instrument_type, path):
    try:
        mid_file = converter.parse(path)
        parts = instrument.partitionByInstrument(mid_file)
        # print(parts)
        notes_list = []
        for instrument in range(len(parts)):
            if parts.parts[instrument].id in instrument_type:
                for elm_offset in stream.iterator.OffsetIterator(parts[instrument]):
                    for elm in elm_offset:
                        if isinstance(elm, note.Note):
                            notes_list.append(str(elm.pitch).replace('-', ''))
                        elif isinstance(elm, note.Rest):
                            notes_list.append(0)
        return notes_list
    except Exception as e:
        print("failed on ", path)


# notes_listt = get_note_pitch_rests(["Piano"], "riptidept2.midi")[0:-2]

def str_notes_to_freq(notes):
    return [hz_vals[i] if i != 0 else 0 for i in notes]

def put_freqs_in_file(notes_list)
    beat = str_notes_to_freq(notes_list)
    print(max(beat))
    print(len(beat))
    file1 = open('myfile.txt', 'w')
    file1.write(str(beat))
    file1.close()


bohmeian_song = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 123.47, 174.61, 246.94, 246.94, 0, 123.47, 174.61, 246.94, 0, 246.94, 0,
                 0, 138.59, 207.65, 0, 246.94, 0, 246.94, 0, 138.59, 207.65, 246.94, 246.94, 138.59, 246.94, 246.94,
                 246.94, 246.94, 164.81, 246.94, 246.94, 0, 164.81, 0, 246.94, 493.88, 0, 246.94, 0, 103.83, 0, 0,
                 415.3, 369.99, 0, 329.63, 103.83, 369.99, 0, 349.23, 369.99, 185.0, 369.99, 0, 0, 0, 0, 0, 0, 0, 185.0,
                 0, 0, 0, 0, 0, 0, 0, 164.81, 329.63, 0, 329.63, 0, 392.0, 0, 293.66, 349.23, 0, 293.66, 0, 0, 493.88,
                 146.83, 293.66, 0, 138.59, 246.94, 277.18, 0, 277.18, 0, 329.63, 392.0, 0, 0, 261.63, 0, 0, 261.63, 0,
                 349.23, 440.0, 0, 0, 261.63, 0, 87.31, 0, 0, 0, 261.63, 440.0, 130.81, 220.0, 261.63, 440.0, 87.31,
                 130.81, 220.0, 261.63, 0, 0, 220.0, 61.74, 123.47, 246.94, 0, 0, 174.61, 0, 246.94, 293.66, 392.0,
                 783.99, 0, 0, 61.74, 123.47,
                 246.94, 174.61, 293.66, 174.61, 174.61, 61.74, 0, 0, 392.0, 174.61, 246.94, 293.66, 0, 0, 61.74,
                 174.61, 246.94, 293.66, 174.61, 0, 174.61, 246.94, 293.66, 0, 174.61, 246.94, 293.66, 0, 0, 246.94,
                 293.66, 174.61, 0, 174.61, 98.0, 246.94, 293.66, 0, 196.0, 246.94, 293.66, 440.0, 880.0, 0, 0, 98.0,
                 196.0, 246.94, 293.66, 196.0, 293.66, 0, 0, 0, 261.63, 0, 329.63, 392.0, 587.33, 1174.66, 0, 0, 0,
                 329.63, 261.63, 392.0, 261.63, 523.25, 1046.5, 329.63, 65.41, 130.81, 392.0, 0, 523.25, 329.63, 261.63,
                 65.41, 329.63, 0, 392.0, 0, 440.0, 0, 0, 329.63, 349.23, 523.25, 0, 0, 0, 123.47, 246.94, 293.66, 0,
                 174.61, 0, 246.94, 0, 293.66, 0, 0, 123.47, 246.94, 293.66, 174.61, 174.61, 98.0, 246.94, 293.66, 0, 196.0,
                 246.94, 0, 293.66, 440.0, 880.0, 0, 0,
                 98.0, 293.66, 246.94, 196.0, 392.0, 783.99, 196.0, 130.81, 0, 392.0,
                 196.0, 0, 261.63, 0, 0, 0, 123.47, 0, 0, 392.0, 196.0, 0, 110.0, 0, 0, 196.0, 0, 103.83, 0, 0, 207.65,
                 0, 261.63, 329.63, 207.65, 0, 246.94, 0, 196.0, 0, 0, 87.31, 174.61, 0, 0, 196.0, 0, 196.0, 0, 0, 196.0,
                 174.61, 0, 261.63, 329.63, 392.0, 0, 0, 0, 0, 329.63, 0, 261.63, 523.25, 392.0, 0, 87.31,
                 174.61, 0, 0, 261.63, 523.25, 261.63, 349.23, 415.3, 523.25, 0, 0, 261.63, 0, 0, 0, 261.63, 523.25,
                 261.63, 0, 0, 73.42, 0, 261.63, 293.66, 369.99, 493.88, 0, 246.94, 0, 0, 246.94, 0, 0, 246.94, 0, 0,
                 329.63, 392.0, 0, 246.94, 246.94, 392.0, 349.23, 0,
                 329.63, 0, 0, 246.94, 0, 329.63, 0, 246.94, 0, 329.63, 0, 293.66, 0, 0, 0, 196.0, 0, 0, 196.0, 103.83,
                 0, 207.65, 0, 0, 207.65, 0, 0, 329.63, 392.0, 493.88, 0, 329.63, 659.25, 659.25,
                 0, 0, 659.25, 659.25, 0, 0, 61.74, 123.47, 246.94, 0, 0, 174.61, 0, 246.94, 293.66, 392.0, 783.99, 0,
                 0, 61.74, 123.47, 246.94, 174.61, 293.66, 174.61, 174.61, 61.74, 0, 0, 392.0, 174.61, 246.94, 293.66,
                 0, 0, 61.74, 174.61, 246.94, 293.66, 174.61, 0, 174.61, 246.94, 293.66, 0, 174.61, 246.94, 293.66, 0,
                 0, 246.94, 293.66, 174.61, 0, 174.61, 98.0, 246.94, 293.66, 0,
                 196.0, 246.94, 293.66, 440.0, 880.0, 0, 0, 98.0, 196.0, 246.94, 293.66, 196.0, 293.66, 0, 0, 0, 261.63,
                 0, 329.63, 392.0, 587.33, 1174.66, 0, 0, 0, 329.63, 261.63, 392.0, 261.63, 523.25, 1046.5, 329.63,
                 65.41, 130.81, 392.0, 0, 523.25, 329.63, 261.63, 65.41, 329.63, 0, 392.0, 0, 440.0, 0, 0, 329.63,
                 349.23, 523.25, 0, 0, 0, 123.47, 246.94, 293.66, 0, 174.61, 0, 246.94, 0, 293.66, 0, 0, 123.47, 246.94,
                 293.66, 174.61, 174.61, 98.0, 246.94, 293.66, 261.63, 0, 196.0, 246.94, 0, 293.66, 440.0, 880.0, 0, 0,
                 98.0, 293.66, 246.94, 196.0, 392.0, 783.99, 196.0, 130.81, 0, 392.0, 196.0, 0, 261.63, 0, 0, 0, 123.47,
                 0, 0, 392.0, 196.0, 0, 110.0, 0, 0, 196.0, 0, 103.83, 0, 0, 207.65, 0, 261.63, 329.63, 207.65, 0,
                 246.94, 0, 196.0, 0, 0, 87.31, 174.61, 0, 0, 196.0, 0, 196.0, 0, 0, 196.0, 174.61, 0, 261.63, 329.63,
                 392.0, 0, 0, 0, 0, 329.63, 0, 261.63, 523.25, 392.0, 0, 87.31, 174.61, 0, 0, 261.63, 523.25, 261.63,
                 349.23, 415.3, 523.25, 0, 0, 261.63, 0, 0, 0, 261.63, 523.25, 261.63, 0, 0, 73.42, 0, 261.63, 293.66,
                 369.99, 493.88, 0,246.94, 0, 0, 246.94, 0, 0, 246.94, 0, 0, 82.41, 246.94, 329.63, 0, 392.0, 349.23,
                 0, 329.63, 73.42, 0, 146.83, 392.0, 0, 0, 130.81, 0, 65.41, 0, 0, 0, 130.81, 293.66, 329.63, 0, 130.81,
                 261.63, 392.0, 523.25, 0, 0, 293.66, 0, 0, 415.3, 0, 523.25, 174.61, 0, 0, 261.63, 82.41, 415.3, 261.63,
                 0, 293.66, 0, 0, 61.74, 123.47, 246.94, 493.88, 0, 123.47, 0, 61.74, 246.94, 0, 0, 0, 123.47, 246.94,
                 493.88, 349.23, 349.23, 61.74, 0, 0, 0, 0, 0, 164.81, 0, 246.94, 493.88, 73.42, 293.66, 349.23, 246.94,
                 493.88, 246.94, 293.66, 146.83, 0, 98.0, 392.0, 261.63, 130.81, 293.66, 329.63, 0, 65.41, 261.63,
                 329.63, 130.81, 0, 293.66, 329.63, 0, 261.63, 0, 0, 293.66, 0, 87.31, 174.61, 0, 0, 0, 138.59, 0, 0,
                 277.18, 0, 0, 0, 277.18, 0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 369.99, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 659.25, 0, 0, 0, 349.23, 0, 0, 0, 0, 0, 523.25, 523.25, 493.88, 587.33, 698.46, 0, 698.46,
                 415.3, 493.88, 698.46, 0, 698.46, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 349.23, 0, 698.46, 0, 0, 0, 698.46, 659.25, 523.25, 0, 415.3, 349.23, 415.3, 659.25, 523.25,
                 349.23, 329.63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 349.23, 220.0, 246.94, 0, 246.94,
                 261.63, 0, 293.66, 329.63, 349.23, 0, 349.23, 0, 220.0, 246.94, 0, 246.94, 0, 261.63, 0, 293.66, 0,
                 261.63, 0, 0, 349.23, 0, 220.0, 0, 246.94, 0, 0, 246.94, 0, 261.63, 0, 293.66, 329.63, 349.23, 0, 0,
                 392.0, 0, 246.94, 261.63, 0, 0, 277.18, 293.66, 329.63, 0, 293.66, 0, 261.63, 261.63, 261.63, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 587.33, 587.33, 0, 0, 349.23, 349.23, 0, 0, 349.23, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 246.94, 0, 0, 246.94, 0, 0, 164.81, 0,
                 246.94, 0, 246.94, 146.83, 0, 0, 196.0, 0, 196.0, 261.63, 130.81, 0, 0, 0, 0, 0, 0, 146.83, 261.63,
                 293.66, 369.99, 392.0, 440.0, 0, 0, 98.0, 246.94, 0, 293.66, 146.83, 196.0, 246.94, 103.83, 0, 0,
                 164.81, 0, 164.81, 329.63, 164.81, 246.94, 0, 0, 0, 130.81, 0, 523.25, 0, 98.0, 0, 0, 146.83, 293.66,
                 0, 392.0, 0, 0, 130.81, 329.63,
                 523.25, 0, 392.0, 196.0, 0, 523.25, 0, 0, 0, 130.81, 329.63, 392.0, 523.25, 0, 392.0, 0, 523.25, 0, 0,
                 415.3, 415.3, 123.47, 415.3, 0, 246.94, 0, 0, 123.47, 246.94, 246.94, 0, 0, 246.94, 123.47, 0, 164.81,
                 392.0, 493.88, 0, 0, 587.33, 196.0, 0, 329.63, 0, 392.0, 493.88, 0, 185.0, 523.25, 587.33, 523.25,
                 587.33, 0, 174.61, 349.23, 493.88, 293.66, 349.23, 493.88, 0, 0, 493.88, 0, 174.61, 415.3, 0, 0, 415.3,
                 392.0, 0, 0, 164.81, 261.63, 329.63, 392.0, 0, 261.63, 0, 329.63, 0, 493.88, 0, 493.88, 0, 164.81,
                 261.63, 329.63, 415.3, 0, 0, 415.3, 0, 392.0, 0, 130.81, 392.0, 0, 329.63, 261.63, 246.94, 0, 0, 392.0,
                 130.81, 174.61, 349.23, 130.81, 0, 293.66, 174.61, 0, 293.66, 110.0, 0, 0, 0, 110.0, 174.61, 349.23, 0,
                 0, 349.23, 349.23, 0, 0, 349.23, 349.23, 349.23, 349.23]

finger_ex_notes = [261.63, 293.66, 329.63, 369.99, 415.3, 369.99, 329.63, 293.66, 277.18, 329.63, 349.23, 392.0, 440.0,
                   392.0, 349.23, 277.18, 261.63, 293.66, 329.63, 369.99, 415.3, 369.99, 329.63, 293.66, 277.18, 329.63,
                   349.23, 392.0, 440.0, 392.0, 349.23, 277.18, 261.63, 220.0, 293.66, 329.63, 369.99, 415.3, 369.99, 0,
                   293.66, 277.18, 246.94, 329.63, 349.23, 392.0, 440.0, 392.0, 349.23, 277.18, 261.63, 220.0, 293.66,
                   329.63, 369.99, 415.3, 369.99, 0, 293.66, 277.18, 164.81, 329.63, 349.23, 392.0, 440.0, 392.0,
                   349.23, 277.18, 174.61, 0, 277.18, 293.66, 329.63, 349.23, 293.66, 138.59, 329.63, 369.99, 415.3,
                   329.63, 130.81, 349.23, 392.0, 440.0, 329.63, 123.47, 369.99, 415.3, 493.88, 349.23, 110.0, 392.0,
                   440.0, 493.88, 554.37, 493.88, 440.0, 392.0, 349.23, 55.0, 392.0, 440.0, 392.0,
                   349.23, 329.63, 329.63, 277.18, 261.63, 220.0, 293.66, 329.63, 369.99, 415.3, 369.99, 0,
                   293.66, 277.18, 246.94, 329.63, 349.23, 392.0, 440.0, 392.0, 349.23, 293.66, 329.63, 261.63, 349.23,
                   392.0, 440.0, 493.88, 440.0, 0, 349.23, 329.63, 277.18, 369.99, 415.3, 493.88, 523.25, 493.88, 415.3,
                   349.23, 369.99, 329.63, 415.3, 493.88, 523.25, 392.0, 329.63, 440.0, 493.88, 554.37, 415.3, 293.66,
                   493.88, 523.25, 587.33, 440.0, 246.94, 493.88, 554.37, 659.25, 523.25, 220.0, 587.33, 659.25, 739.99,
                   830.61, 739.99, 659.25, 739.99, 659.25, 185.0, 587.33, 523.25, 587.33, 659.25, 0, 587.33, 523.25,
                   493.88, 493.88, 369.99, 523.25, 587.33, 659.25, 698.46, 659.25, 587.33, 659.25, 587.33, 293.66,
                   523.25, 493.88, 523.25, 587.33, 0, 523.25, 493.88, 415.3,
                   369.99, 329.63, 415.3, 493.88, 523.25, 587.33, 523.25, 493.88, 523.25, 493.88, 246.94, 415.3, 369.99,
                   415.3, 369.99, 0, 329.63, 329.63, 392.0, 369.99, 329.63, 293.66, 329.63, 293.66, 261.63, 246.94,
                   220.0, 246.94, 277.18, 329.63, 293.66, 277.18, 246.94, 207.65, 246.94, 246.94, 220.0, 196.0, 174.61,
                   164.81, 185.0, 207.65, 246.94, 246.94, 220.0, 196.0,
                   220.0, 174.61, 164.81, 146.83, 138.59, 523.25, 130.81, 146.83, 164.81, 185.0, 207.65, 185.0, 0,
                   146.83, 349.23, 138.59, 164.81, 174.61, 196.0, 220.0, 196.0, 0, 138.59, 329.63, 130.81, 146.83,
                   164.81, 185.0, 207.65, 185.0, 0, 146.83, 220.0, 138.59, 164.81, 174.61, 196.0, 220.0, 0, 196.0,
                   174.61, 138.59, 659.25, 130.81, 146.83, 164.81, 185.0, 207.65, 185.0, 0, 146.83, 440.0, 138.59,
                   164.81, 174.61, 196.0, 220.0, 196.0, 0, 138.59, 415.3, 130.81, 146.83, 164.81, 185.0, 207.65, 185.0,
                   0, 146.83, 261.63, 138.59, 164.81, 174.61, 196.0, 220.0, 0, 196.0, 174.61, 138.59, 830.61, 130.81,
                   146.83, 164.81, 185.0, 207.65, 185.0, 0, 146.83, 523.25, 138.59, 164.81, 174.61, 196.0, 220.0, 196.0,
                   0, 138.59, 415.3, 130.81, 146.83, 164.81, 185.0, 207.65, 185.0, 0, 146.83, 261.63, 138.59, 164.81,
                   174.61, 196.0, 220.0, 196.0, 0, 138.59, 220.0, 130.81, 146.83, 164.81, 185.0, 207.65, 185.0, 246.94,
                   261.63, 220.0, 277.18, 329.63, 349.23, 392.0, 440.0, 392.0, 493.88, 554.37, 659.25, 0, 554.37,
                   493.88, 440.0, 523.25, 493.88, 415.3, 369.99, 440.0, 0, 392.0, 349.23, 329.63, 369.99, 329.63,
                   293.66, 261.63, 329.63, 0, 277.18, 246.94, 220.0, 261.63, 246.94, 207.65, 185.0, 220.0, 0, 196.0,
                   174.61, 164.81, 185.0, 164.81, 146.83, 130.81, 164.81, 0, 138.59, 123.47, 110.0, 185.0, 164.81,
                   146.83, 130.81, 164.81, 0, 138.59, 123.47, 110.0, 185.0, 164.81, 146.83, 130.81, 164.81, 0, 138.59,
                   123.47, 110.0, 185.0, 196.0, 185.0, 164.81, 130.81, 110.0, 110.0, 0]

beat_it = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 61.74, 0, 61.74, 0, 61.74, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 61.74, 0, 61.74, 0, 61.74, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 61.74, 0, 61.74, 0, 61.74, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 61.74, 0, 61.74, 0, 61.74, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 41.2, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 61.74, 0, 61.74, 0, 61.74, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 61.74, 0, 61.74, 0, 61.74, 0, 69.3, 0, 69.3, 0, 69.3, 0, 0, 82.41, 0, 82.41, 0, 82.41, 0, 69.3, 0, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3, 0, 69.3, 0, 41.2, 41.2, 46.25, 61.74, 92.5, 82.41, 82.41, 82.41, 82.41, 69.3]

def request_handler(request):
    # new image and continuring sending chunks
    if request["method"] == "GET" and 'chunk' in request['values']:
        chunk_num = int(request['values']['chunk'])
        send_song = song_riffs[chunk_num % 3]
        send_song = json.dumps(send_song)
        return send_song
    if request["method"] == "GET" and 'song' in request['values']:
        return beat_it
